<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Solicite sua análise de visto americano B1/B2 de forma estratégica. Preencha nosso formulário e receba orientação personalizada.">
    <meta name="theme-color" content="#000000">
    <meta property="og:title" content="Solicitação de Visto B1/B2 - Formulário Estratégico">
    <meta property="og:description" content="Análise estratégica do seu perfil para visto americano B1/B2.">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary">
    <title>Solicitação de Visto B1/B2 - Formulário Estratégico</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@26.3.1/build/css/intlTelInput.css">
    <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@26.3.1/build/js/intlTelInput.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: '#000000',
                        'primary-hover': '#1a1a1a',
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.5s ease-out forwards',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom utilities that are harder to do with just utility classes */
        .step {
            display: none;
        }

        .step.active {
            display: flex;
            flex-direction: column;
            animation: fadeInUp 0.5s ease-out forwards;
            height: 100%;
            overflow-y: auto;
            /* Enable vertical scrolling */
            -webkit-overflow-scrolling: touch;
            /* Smooth scrolling on iOS */
            padding-bottom: 2rem;
            /* Ensure bottom content is accessible */
        }

        /* Custom Scrollbar for steps */
        .step.active::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #e5e7eb;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* ===== INTL-TEL-INPUT - CSS ISOLADO DO TAILWIND ===== */

        /* Container do telefone */
        .telefone-container {
            position: relative;
            width: 100%;
            z-index: 9999;
            /* Garantir que fique acima de outros elementos */
        }

        /* Garantir que o step não corte o dropdown */
        .step {
            overflow: visible !important;
        }

        /* Container principal do plugin quando ativo */
        .iti.iti--allow-dropdown {
            position: relative !important;
            z-index: auto;
        }

        /* Input base (isolado das classes Tailwind) */
        .telefone-input {
            width: 100% !important;
            height: 48px !important;
            padding: 12px 16px 12px 110px !important;
            font-size: 16px !important;
            line-height: 24px !important;
            color: #111827 !important;
            background-color: #ffffff !important;
            border: 1px solid #d1d5db !important;
            border-radius: 8px !important;
            box-sizing: border-box !important;
            margin: 0 !important;
            font-family: inherit !important;
        }

        .telefone-input:focus {
            outline: none !important;
            border-color: #000000 !important;
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1) !important;
        }

        /* Container principal do plugin */
        .iti {
            position: relative !important;
            display: block !important;
            width: 100% !important;
        }

        /* Container da bandeira (flag-container) */
        .iti__flag-container {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            bottom: 0 !important;
            z-index: 10 !important;
        }

        /* Botão/bandeira selecionada */
        .iti__selected-flag {
            display: flex !important;
            align-items: center !important;
            height: 46px !important;
            margin-top: 1px !important;
            margin-left: 1px !important;
            padding: 0 12px !important;
            background-color: #f3f4f6 !important;
            border: none !important;
            border-radius: 7px 0 0 7px !important;
            cursor: pointer !important;
        }

        /* Bandeira do país */
        .iti__selected-flag .iti__flag {
            width: 20px !important;
            height: 14px !important;
            margin-right: 6px !important;
            box-shadow: 0 0 1px rgba(0, 0, 0, 0.3) !important;
            flex-shrink: 0 !important;
        }

        /* ===== DDI (Código do país) - VISIBILIDADE FORÇADA ===== */
        .iti__selected-dial-code {
            display: inline-block !important;
            visibility: visible !important;
            opacity: 1 !important;
            color: #374151 !important;
            font-size: 14px !important;
            font-weight: 500 !important;
            line-height: 1 !important;
            margin: 0 !important;
            padding: 0 4px 0 0 !important;
            font-family: inherit !important;
            white-space: nowrap !important;
            min-width: 30px !important;
        }

        /* Quando separateDialCode está ativo */
        .iti--separate-dial-code .iti__selected-flag {
            background-color: #f3f4f6 !important;
        }

        .iti--separate-dial-code .iti__selected-dial-code {
            display: inline-block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }

        /* Seta do dropdown */
        .iti__arrow {
            margin-left: 6px !important;
            width: 0 !important;
            height: 0 !important;
            border-left: 3px solid transparent !important;
            border-right: 3px solid transparent !important;
            border-top: 4px solid #6b7280 !important;
        }

        /* Dropdown de países - MODAL/Lista */
        .iti__country-list {
            position: fixed !important;
            /* FIXED para sair do contexto */
            top: auto !important;
            bottom: auto !important;
            left: auto !important;
            right: auto !important;
            z-index: 2147483647 !important;
            /* MÁXIMO possível */
            max-height: 300px !important;
            width: 320px !important;
            min-width: 280px !important;
            max-width: calc(100vw - 32px) !important;
            /* Limitar largura no mobile */
            overflow-y: auto !important;
            overflow-x: hidden !important;
            background-color: #ffffff !important;
            border: 1px solid #d1d5db !important;
            border-radius: 8px !important;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
            list-style: none !important;
            padding: 4px 0 !important;
            margin: 0 !important;
            display: none;
            /* Inicialmente escondido */
        }

        /* Mostrar quando NÃƒO tem classe hide */
        .iti__country-list:not(.iti__hide) {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }

        /* Quando tem classe hide */
        .iti__country-list.iti__hide {
            display: none !important;
            visibility: hidden !important;
        }

        /* Container do plugin quando dropdown aberto */
        .iti--allow-dropdown.iti--container,
        .iti.iti--container {
            position: relative !important;
            width: 100% !important;
            max-width: 100% !important;
        }

        /* CORREÃ‡ÃƒO: Transformar fullscreen-popup em modal centralizado */
        .iti.iti--container.iti--fullscreen-popup {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 2147483647 !important;
            background: rgba(0, 0, 0, 0.5) !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        .iti.iti--container.iti--fullscreen-popup .iti__dropdown-content {
            position: relative !important;
            width: 90% !important;
            max-width: 320px !important;
            max-height: 80vh !important;
        }

        /* Garantir que o dropdown esteja acima de tudo */
        .iti--allow-dropdown .iti__dropdown-content,
        .iti__dropdown-content {
            position: absolute !important;
            z-index: 99999 !important;
        }

        /* Cada item da lista */
        .iti__country {
            display: flex !important;
            align-items: center !important;
            padding: 10px 16px !important;
            cursor: pointer !important;
            font-size: 14px !important;
            color: #374151 !important;
            background-color: transparent !important;
        }

        .iti__country:hover,
        .iti__country.iti__highlight {
            background-color: #f3f4f6 !important;
        }

        .iti__country .iti__flag {
            margin-right: 10px !important;
            flex-shrink: 0 !important;
        }

        .iti__country-name {
            flex: 1 !important;
            margin-right: 8px !important;
        }

        .iti__dial-code {
            color: #6b7280 !important;
            font-weight: 500 !important;
        }

        /* Forçar visibilidade do dropdown quando aberto */
        .iti__country-list:not(.iti__hide) {
            display: block !important;
        }

        /* Classe hide da biblioteca */
        .iti__hide {
            display: none !important;
        }

        /* Container quando dropdown está aberto */
        .iti--allow-dropdown.iti--show-flags .iti__country-list {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }

        /* Fix para o dropdown aparecer */
        .iti--allow-dropdown {
            position: relative !important;
        }

        .iti--allow-dropdown .iti__dropdown-content {
            position: absolute !important;
            z-index: 99999 !important;
        }

        /* Quando o dropdown é movido para o body - posicionar corretamente */
        body>.iti__country-list {
            position: absolute !important;
            z-index: 99999 !important;
            max-width: 100% !important;
            width: calc(100vw - 32px) !important;
            left: 16px !important;
            right: 16px !important;
        }

        /* Limitar largura do dropdown no mobile para evitar scroll horizontal */
        @media (max-width: 640px) {

            .iti--container .iti__dropdown-content,
            .iti__dropdown-content {
                max-width: calc(100vw - 32px) !important;
                width: calc(100vw - 32px) !important;
            }

            .iti__country-list {
                width: 100% !important;
                max-width: 100% !important;
            }
        }

        /* Garantir que o body não corte o dropdown */
        body {
            overflow-x: hidden !important;
            position: relative !important;
        }

        /* Container do form não pode ter overflow hidden */
        main,
        form,
        .step,
        .telefone-container {
            overflow: visible !important;
        }

        /* Específico para o step-0 onde está o telefone */
        #step-0 {
            overflow: visible !important;
            position: relative !important;
            z-index: 100 !important;
        }



        /* Se o dropdown for movido para fora do container */
        .iti--container .iti__country-list,
        body .iti__country-list {
            z-index: 99999 !important;
        }

        /* Forçar visibilidade quando aberto (sobrescreve qualquer regra) */
        .iti__country-list[style*="display: block"],
        .iti__country-list:not([style*="display: none"]):not(.iti__hide) {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }

        /* Hide helper */
        .hide,
        .hidden {
            display: none !important;
        }

        /* Mobile */
        @media (max-width: 640px) {
            .telefone-input {
                font-size: 16px !important;
            }

            /* Garantir que o dropdown não cause scroll horizontal */
            .iti__country-list {
                position: fixed !important;
                left: 16px !important;
                right: 16px !important;
                width: auto !important;
                min-width: auto !important;
                max-width: calc(100vw - 32px) !important;
            }
        }

        @media (max-width: 640px) {
            body {
                padding: 0 !important;
                align-items: flex-start !important;
                padding-top: 60px !important;
                /* Space for fixed nav */
            }

            main {
                border-radius: 0 !important;
                box-shadow: none !important;
                padding: 24px 16px !important;
                margin-top: 0 !important;
            }

            .nav-mobile {
                display: flex;
            }
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4 text-gray-800 font-sans">

    <!-- Header / Nav -->
    <nav class="fixed top-0 left-0 w-full z-50 h-16 flex items-center justify-center bg-gray-50">
        <img src="logo-preto.png" alt="Análise Visto Americano" class="h-10 w-auto object-contain">
    </nav>

    <main class="w-full max-w-xl bg-white rounded-xl shadow-sm p-6 md:p-8 relative mt-4">



        <form id="visaForm" onsubmit="return false;">

            <!-- === STEP 0: CONTATO (LEAD CAPTURE) === -->
            <div class="step active" id="step-0" data-step="0">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Dados de contato</h2>
                    <p class="text-sm text-gray-500 mb-6">Preencha seus dados para iniciarmos sua análise.</p>

                    <div class="grid grid-cols-1 gap-4">
                        <!-- Nome Completo -->
                        <div>
                            <label for="nome_completo" class="block text-sm font-medium text-gray-700 mb-1">Nome
                                Completo <span class="text-red-500">*</span></label>
                            <input type="text" id="nome_completo" name="nome_completo" placeholder="Ex: João Silva"
                                required
                                class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all">
                        </div>

                        <!-- Email -->
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">E-mail <span
                                    class="text-red-500">*</span></label>
                            <input type="email" id="email" name="email" placeholder="seu@email.com" required
                                class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all">
                        </div>

                        <!-- Telefone com DDI (intl-tel-input) -->
                        <div>
                            <label for="telefone" class="block text-sm font-medium text-gray-700 mb-1">Telefone /
                                WhatsApp <span class="text-red-500">*</span></label>
                            <div id="phone-container" class="telefone-container">
                                <input type="tel" id="telefone" name="telefone" placeholder="" required
                                    class="telefone-input">
                            </div>
                            <span id="error-msg" class="hidden text-red-500 text-sm mt-1 block"></span>
                        </div>
                    </div>

                    <div class="mt-8">
                        <button type="button"
                            class="w-full bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="submitLeadAndContinue()">
                            Começar Análise
                        </button>
                    </div>
                </div>
            </div>

            <!-- === STEP 0-TRUTH: COMPROMISSO COM A VERDADE === -->
            <div class="step" id="step-0-truth" data-step="0">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-4">Compromisso com a verdade</h2>

                    <div class="bg-amber-50 border-l-4 border-amber-400 p-4 mb-6 rounded-r-lg">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-amber-400" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                                        clip-rule="evenodd" />
                                </svg>
                            </div>
                            <div class="ml-3">
                                <p class="text-sm text-amber-800 leading-relaxed">
                                    A análise só funciona quando você fornece <strong>respostas verdadeiras, sem
                                        mentiras ou omissões</strong>, pois é a partir delas que identificamos
                                    corretamente se o seu perfil é forte, ajustável ou crítico.
                                </p>
                            </div>
                        </div>
                    </div>

                    <p class="text-base text-gray-700 mb-6 leading-relaxed">
                        Com base nas suas respostas honestas, apontamos os ajustes necessários para atender às
                        exigências e aos critérios do visto americano B1/B2, garantindo a <strong>qualidade e a
                            assertividade da análise</strong>.
                    </p>

                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-8 text-center">
                        <p class="text-sm text-gray-700 font-medium">
                            Eu me comprometo a fornecer informações verdadeiras e completas durante toda a análise
                        </p>
                    </div>

                    <div class="flex justify-between items-center">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevCadastroStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-semibold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="goToAnalise()">
                            Serei verdadeiro(a)
                        </button>
                    </div>
                </div>
            </div>

        </form>
    </main>

    <script src="shared.js"></script>
    <script src="cadastro.js"></script>
</body>

</html>