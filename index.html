<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solicitação de Visto B1/B2 - Formulário Estratégico</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- International Telephone Input - Versão 18+ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.5.3/build/css/intlTelInput.css" />
    <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.5.3/build/js/intlTelInput.min.js"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                fontFamily: {
                    sans: ['Inter', 'sans-serif'],
                },
                colors: {
                    primary: '#000000',
                    'primary-hover': '#1a1a1a',
                },
                animation: {
                    'fade-in-up': 'fadeInUp 0.5s ease-out forwards',
                },
                keyframes: {
                    fadeInUp: {
                        '0%': { opacity: '0', transform: 'translateY(10px)' },
                        '100%': { opacity: '1', transform: 'translateY(0)' },
                    }
                }
            }
        }
    }
    </script>
    <style>
        /* Custom utilities that are harder to do with just utility classes */
        .step {
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeInUp 0.5s ease-out forwards;
            overflow: visible !important; /* Garantir que o dropdown não seja cortado */
        }

        /* Hide scrollbar for clean look */
        ::-webkit-scrollbar {
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* ===== INTL-TEL-INPUT - CSS ISOLADO DO TAILWIND ===== */
        
        /* Container do telefone */
        .telefone-container {
            position: relative;
            width: 100%;
            z-index: 9999; /* Garantir que fique acima de outros elementos */
        }
        
        /* Garantir que o step não corte o dropdown */
        .step {
            overflow: visible !important;
        }
        
        /* Container principal do plugin quando ativo */
        .iti.iti--allow-dropdown {
            position: relative !important;
            z-index: auto;
        }
        
        /* Input base (isolado das classes Tailwind) */
        .telefone-input {
            width: 100% !important;
            height: 48px !important;
            padding: 12px 16px 12px 110px !important;
            font-size: 16px !important;
            line-height: 24px !important;
            color: #111827 !important;
            background-color: #ffffff !important;
            border: 1px solid #d1d5db !important;
            border-radius: 8px !important;
            box-sizing: border-box !important;
            margin: 0 !important;
            font-family: inherit !important;
        }
        
        .telefone-input:focus {
            outline: none !important;
            border-color: #000000 !important;
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1) !important;
        }
        
        /* Container principal do plugin */
        .iti {
            position: relative !important;
            display: block !important;
            width: 100% !important;
        }
        
        /* Container da bandeira (flag-container) */
        .iti__flag-container {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            bottom: 0 !important;
            z-index: 10 !important;
        }
        
        /* Botão/bandeira selecionada */
        .iti__selected-flag {
            display: flex !important;
            align-items: center !important;
            height: 46px !important;
            margin-top: 1px !important;
            margin-left: 1px !important;
            padding: 0 12px !important;
            background-color: #f3f4f6 !important;
            border: none !important;
            border-radius: 7px 0 0 7px !important;
            cursor: pointer !important;
        }
        
        /* Bandeira do país */
        .iti__selected-flag .iti__flag {
            width: 20px !important;
            height: 14px !important;
            margin-right: 6px !important;
            box-shadow: 0 0 1px rgba(0,0,0,0.3) !important;
            flex-shrink: 0 !important;
        }
        
        /* ===== DDI (CÓDIGO DO PAÍS) - VISIBILIDADE FORÇADA ===== */
        .iti__selected-dial-code {
            display: inline-block !important;
            visibility: visible !important;
            opacity: 1 !important;
            color: #374151 !important;
            font-size: 14px !important;
            font-weight: 500 !important;
            line-height: 1 !important;
            margin: 0 !important;
            padding: 0 4px 0 0 !important;
            font-family: inherit !important;
            white-space: nowrap !important;
            min-width: 30px !important;
        }
        
        /* Quando separateDialCode está ativo */
        .iti--separate-dial-code .iti__selected-flag {
            background-color: #f3f4f6 !important;
        }
        
        .iti--separate-dial-code .iti__selected-dial-code {
            display: inline-block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        /* Seta do dropdown */
        .iti__arrow {
            margin-left: 6px !important;
            width: 0 !important;
            height: 0 !important;
            border-left: 3px solid transparent !important;
            border-right: 3px solid transparent !important;
            border-top: 4px solid #6b7280 !important;
        }
        
        /* Dropdown de países - MODAL/Lista */
        .iti__country-list {
            position: fixed !important; /* FIXED para sair do contexto */
            top: auto !important;
            bottom: auto !important;
            left: auto !important;
            right: auto !important;
            z-index: 2147483647 !important; /* MÁXIMO possível */
            max-height: 300px !important;
            width: 320px !important;
            min-width: 280px !important;
            max-width: calc(100vw - 32px) !important; /* Limitar largura no mobile */
            overflow-y: auto !important;
            overflow-x: hidden !important;
            background-color: #ffffff !important;
            border: 1px solid #d1d5db !important;
            border-radius: 8px !important;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
            list-style: none !important;
            padding: 4px 0 !important;
            margin: 0 !important;
            display: none; /* Inicialmente escondido */
        }
        
        /* Mostrar quando NÃO tem classe hide */
        .iti__country-list:not(.iti__hide) {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        /* Quando tem classe hide */
        .iti__country-list.iti__hide {
            display: none !important;
            visibility: hidden !important;
        }
        
        /* Container do plugin quando dropdown aberto */
        .iti--allow-dropdown.iti--container,
        .iti.iti--container {
            position: relative !important;
        }
        
        /* Garantir que o dropdown esteja acima de tudo */
        .iti--allow-dropdown .iti__dropdown-content,
        .iti__dropdown-content {
            position: absolute !important;
            z-index: 99999 !important;
        }
        
        /* Cada item da lista */
        .iti__country {
            display: flex !important;
            align-items: center !important;
            padding: 10px 16px !important;
            cursor: pointer !important;
            font-size: 14px !important;
            color: #374151 !important;
            background-color: transparent !important;
        }
        
        .iti__country:hover,
        .iti__country.iti__highlight {
            background-color: #f3f4f6 !important;
        }
        
        .iti__country .iti__flag {
            margin-right: 10px !important;
            flex-shrink: 0 !important;
        }
        
        .iti__country-name {
            flex: 1 !important;
            margin-right: 8px !important;
        }
        
        .iti__dial-code {
            color: #6b7280 !important;
            font-weight: 500 !important;
        }
        
        /* Forçar visibilidade do dropdown quando aberto */
        .iti__country-list:not(.iti__hide) {
            display: block !important;
        }
        
        /* Classe hide da biblioteca */
        .iti__hide {
            display: none !important;
        }
        
        /* Container quando dropdown está aberto */
        .iti--allow-dropdown.iti--show-flags .iti__country-list {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        /* Fix para o dropdown aparecer */
        .iti--allow-dropdown {
            position: relative !important;
        }
        
        .iti--allow-dropdown .iti__dropdown-content {
            position: absolute !important;
            z-index: 99999 !important;
        }
        
        /* Quando o dropdown é movido para o body - posicionar corretamente */
        body > .iti__country-list {
            position: absolute !important;
            z-index: 99999 !important;
            max-width: 100% !important;
            width: calc(100vw - 32px) !important;
            left: 16px !important;
            right: 16px !important;
        }
        
        /* Limitar largura do dropdown no mobile para evitar scroll horizontal */
        @media (max-width: 640px) {
            .iti--container .iti__dropdown-content,
            .iti__dropdown-content {
                max-width: calc(100vw - 32px) !important;
                width: calc(100vw - 32px) !important;
            }
            
            .iti__country-list {
                width: 100% !important;
                max-width: 100% !important;
            }
        }
        
        /* Garantir que o body não corte o dropdown */
        body {
            overflow-x: hidden !important;
            position: relative !important;
        }
        
        /* Container do form não pode ter overflow hidden */
        main, form, .step, .telefone-container {
            overflow: visible !important;
        }
        
        /* Específico para o step-0 onde está o telefone */
        #step-0 {
            overflow: visible !important;
            position: relative !important;
            z-index: 100 !important;
        }
        
        /* Página final - ajustes */
        #step-final {
            padding-top: 4rem !important;
            min-height: calc(100vh - 4rem) !important;
        }
        
        #step-final .flex-col {
            justify-content: flex-start !important;
            padding-top: 2rem !important;
        }
        
        /* Se o dropdown for movido para fora do container */
        .iti--container .iti__country-list,
        body .iti__country-list {
            z-index: 99999 !important;
        }
        
        /* Forçar visibilidade quando aberto (sobrescreve qualquer regra) */
        .iti__country-list[style*="display: block"],
        .iti__country-list:not([style*="display: none"]):not(.iti__hide) {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        /* Hide helper */
        .hide, .hidden {
            display: none !important;
        }
        
        /* Mobile */
        @media (max-width: 640px) {
            .telefone-input {
                font-size: 16px !important;
            }
            
            /* Garantir que o dropdown não cause scroll horizontal */
            .iti__country-list {
                position: fixed !important;
                left: 16px !important;
                right: 16px !important;
                width: auto !important;
                min-width: auto !important;
                max-width: calc(100vw - 32px) !important;
            }
        }

        @media (max-width: 640px) {
            body {
                padding: 0 !important;
                align-items: flex-start !important;
                padding-top: 60px !important;
                /* Space for fixed nav */
            }

            main {
                border-radius: 0 !important;
                box-shadow: none !important;
                padding: 24px 16px !important;
                margin-top: 0 !important;
            }

            .nav-mobile {
                display: flex;
            }
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4 text-gray-800 font-sans">

    <!-- Header / Nav -->
    <nav class="fixed top-0 left-0 w-full z-50 h-16 flex items-center justify-center bg-gray-50">
        <img src="logo-preto.png" alt="Análise Visto Americano" class="h-10 w-auto object-contain">
    </nav>

    <main class="w-full max-w-xl bg-white rounded-xl shadow-sm p-6 md:p-8 relative mt-4">



        <form id="visaForm" onsubmit="return false;">

            <!-- === STEP 0: CONTATO (LEAD CAPTURE) === -->
            <div class="step active" id="step-0" data-step="0">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Dados de contato</h2>
                    <p class="text-sm text-gray-500 mb-6">Preencha seus dados para iniciarmos sua análise.</p>

                    <div class="grid grid-cols-1 gap-4">
                        <!-- Nome Completo -->
                        <div>
                            <label for="nome_completo" class="block text-sm font-medium text-gray-700 mb-1">Nome
                                Completo <span class="text-red-500">*</span></label>
                            <input type="text" id="nome_completo" name="nome_completo" placeholder="Ex: João Silva"
                                required
                                class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all">
                        </div>

                        <!-- Email -->
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">E-mail <span
                                    class="text-red-500">*</span></label>
                            <input type="email" id="email" name="email" placeholder="seu@email.com" required
                                class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all">
                        </div>

                        <!-- Telefone -->
                        <div class="telefone-container">
                            <label for="telefone" class="block text-sm font-medium text-gray-700 mb-1">Telefone /
                                WhatsApp <span class="text-red-500">*</span></label>
                            <input type="tel" id="telefone" name="telefone" placeholder="(11) 99999-9999" required
                                class="telefone-input">
                            <span id="error-msg" class="hidden text-red-500 text-sm mt-1 block"></span>
                        </div>
                    </div>

                    <div class="mt-8">
                        <button type="button"
                            class="w-full bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="submitLeadAndContinue()">
                            Começar Análise
                        </button>
                    </div>
                </div>
            </div>

            <!-- === STEP 0-TRUTH: COMPROMISSO COM A VERDADE === -->
            <div class="step" id="step-0-truth" data-step="0">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-4">Compromisso com a verdade</h2>

                    <div class="bg-amber-50 border-l-4 border-amber-400 p-4 mb-6 rounded-r-lg">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-amber-400" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                                        clip-rule="evenodd" />
                                </svg>
                            </div>
                            <div class="ml-3">
                                <p class="text-sm text-amber-800 leading-relaxed">
                                    A análise só funciona quando você fornece <strong>respostas verdadeiras, sem
                                        mentiras ou omissões</strong>, pois é a partir delas que identificamos
                                    corretamente se o seu perfil é forte, ajustável ou crítico.
                                </p>
                            </div>
                        </div>
                    </div>

                    <p class="text-base text-gray-700 mb-6 leading-relaxed">
                        Com base nas suas respostas honestas, apontamos os ajustes necessários para atender às
                        exigências e aos critérios do visto americano B1/B2, garantindo a <strong>qualidade e a
                            assertividade da análise</strong>.
                    </p>

                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-8 text-center">
                        <p class="text-sm text-gray-700 font-medium">
                            Eu me comprometo a fornecer informações verdadeiras e completas durante toda a análise
                        </p>
                    </div>

                    <div class="flex justify-between items-center">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-semibold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('step-1')">
                            Serei verdadeiro(a)
                        </button>
                    </div>
                </div>
            </div>

            <!-- === STEP 1: TIPO DE SOLICITAÇÃO === -->
            <div class="step" id="step-1" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Qual o tipo da sua solicitação?</h2>
                    <p class="text-sm text-gray-500 mb-6">Selecione a opção mais adequada.</p>

                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="solicitacao_tipo" value="primeira"
                                onclick="nextStep('branch-1-a-1')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Primeira solicitação</span>
                            </div>
                        </label>

                        <label class="group relative cursor-pointer">
                            <input type="radio" name="solicitacao_tipo" value="reaplicacao"
                                onclick="nextStep('branch-1-b-1')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Reaplicação após negativa</span>
                            </div>
                        </label>

                        <label class="group relative cursor-pointer">
                            <input type="radio" name="solicitacao_tipo" value="renovacao"
                                onclick="nextStep('branch-1-c-1')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Renovação de visto</span>
                            </div>
                        </label>

                        <label class="group relative cursor-pointer">
                            <input type="radio" name="solicitacao_tipo" value="mudanca"
                                onclick="nextStep('branch-1-d-1')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Mudança de categoria</span>
                            </div>
                        </label>

                        <label class="group relative cursor-pointer">
                            <input type="radio" name="solicitacao_tipo" value="extensao"
                                onclick="nextStep('branch-1-e-1')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Extensão de estadia</span>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- === BRANCH 1.A: PRIMEIRA SOLICITAÇÃO === -->

            <!-- 1.A.1: Já viajou? -->
            <div class="step" id="branch-1-a-1" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Já viajou internacionalmente antes?</h2>
                    <p class="text-sm text-gray-500 mb-8">Informar viagens anteriores ajuda a demonstrar seu histórico
                        como viajante.</p>

                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="viagem_internacional" value="sim"
                                onclick="nextStep('branch-1-a-2')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Sim</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="viagem_internacional" value="nao" onclick="nextStep('step-2')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Não</span>
                            </div>
                        </label>
                    </div>

                    <div class="mt-12 flex justify-start">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 rounded transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>

            <!-- 1.A.2: Quais países? (Only if Sim) -->
            <div class="step" id="branch-1-a-2" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6">Quais países visitou nos últimos 5 anos?</h2>

                    <div class="mb-8">
                        <textarea id="paises_visitados" name="paises_visitados"
                            placeholder="Liste os países e ano da viagem (ex: França 2022, Argentina 2023)" rows="4"
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all resize-none"></textarea>
                    </div>

                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('step-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- === BRANCH 1.B: REAPLICAÇÃO === -->

            <!-- 1.B.1: Data Negativa -->
            <div class="step" id="branch-1-b-1" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Quando foi a negativa anterior?</h2>
                    <p class="text-sm text-gray-500 mb-6">Precisamos saber a data aproximada para entender o tempo
                        decorrido desde a última tentativa.</p>
                    <div class="mb-8">
                        <input type="date" id="data_negativa" name="data_negativa"
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all">
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('branch-1-b-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- 1.B.2: Relato -->
            <div class="step" id="branch-1-b-2" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Conte brevemente o que aconteceu na entrevista
                        anterior</h2>
                    <p class="text-lg text-gray-500 mb-6">Descreva sua experiência, o que foi perguntado, sua resposta e
                        o motivo da negativa.</p>
                    <div class="mb-8">
                        <textarea id="relato_negativa" name="relato_negativa" rows="6"
                            placeholder="Ex: O cônsul perguntou sobre meus vínculos no Brasil e eu não soube explicar bem meu trabalho atual..."
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all resize-none"></textarea>
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('branch-1-b-3')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- 1.B.3: Mudanças -->
            <div class="step" id="branch-1-b-3" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">O que mudou em seu perfil desde a última
                        solicitação?</h2>
                    <p class="text-lg text-gray-500 mb-6">Destaque mudanças profissionais, financeiras ou pessoais.</p>
                    <div class="mb-8">
                        <textarea id="mudancas_perfil" name="mudancas_perfil" rows="6"
                            placeholder="Ex: Agora estou empregado há 2 anos na mesma empresa e iniciei uma pós-graduação..."
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all resize-none"></textarea>
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('step-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- ... (Other branches follow similar pattern, I will implement them all with Tailwind) ... -->

            <!-- === BRANCH 1.C: RENOVAÇÃO === -->
            <!-- 1.C.1: Última Entrada -->
            <div class="step" id="branch-1-c-1" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Quando foi sua última entrada nos EUA?</h2>
                    <p class="text-sm text-gray-500 mb-6">Esta data é importante para verificar se você cumpriu os
                        prazos de estadias anteriores.</p>
                    <div class="mb-8">
                        <input type="date" id="ultima_entrada" name="ultima_entrada"
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all">
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('branch-1-c-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- 1.C.2: Propósito -->
            <div class="step" id="branch-1-c-2" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Qual foi o propósito da viagem anterior?</h2>
                    <p class="text-sm text-gray-500 mb-8">O motivo informado na última vez deve ser consistente com seu
                        uso do visto.</p>
                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="proposito_anterior" value="turismo"
                                onclick="nextStep('branch-1-c-3')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Turismo</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="proposito_anterior" value="negocios"
                                onclick="nextStep('branch-1-c-3')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Negócios</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="proposito_anterior" value="familia"
                                onclick="nextStep('branch-1-c-3')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Visita Familiar</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="proposito_anterior" value="outro"
                                onclick="nextStep('branch-1-c-3')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Outro</span>
                            </div>
                        </label>
                    </div>
                    <div class="mt-8">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>

            <!-- 1.C.3: Tempo Autorizado -->
            <div class="step" id="branch-1-c-3" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Permaneceu o tempo total autorizado?</h2>
                    <p class="text-sm text-gray-500 mb-8">Responda 'Não' caso tenha excedido o prazo concedido pela
                        imigração (I-94).</p>
                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="tempo_autorizado" value="sim" onclick="nextStep('step-2')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Sim</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="tempo_autorizado" value="nao" onclick="nextStep('step-2')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Não</span>
                            </div>
                        </label>
                    </div>
                    <div class="mt-8">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>

            <!-- === BRANCH 1.D (Change Category) & 1.E (Extension) omitted for brevity in this thought process but will be included in full file === -->
            <!-- Implementing all branches to ensure completeness -->

            <!-- 1.D.1: Categoria Atual -->
            <div class="step" id="branch-1-d-1" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Categoria atual do visto:</h2>
                    <p class="text-sm text-gray-500 mb-6">Informe a categoria que consta no seu selo de visto atual.</p>
                    <div class="mb-8">
                        <select name="categoria_atual"
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg bg-white focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all">
                            <option value="" disabled selected>Selecione...</option>
                            <option value="b1">B1</option>
                            <option value="b2">B2</option>
                            <option value="b1_b2">B1/B2</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('branch-1-d-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- 1.D.2: Nova Categoria -->
            <div class="step" id="branch-1-d-2" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Nova categoria desejada:</h2>
                    <p class="text-sm text-gray-500 mb-6">Selecione para qual tipo de visto você deseja mudar agora.</p>
                    <div class="mb-8">
                        <select name="categoria_nova"
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg bg-white focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all">
                            <option value="" disabled selected>Selecione...</option>
                            <option value="f1">F1 (Estudante)</option>
                            <option value="h1b">H1B (Trabalho)</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('branch-1-d-3')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- 1.D.3: Motivo -->
            <div class="step" id="branch-1-d-3" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Motivo da mudança:</h2>
                    <p class="text-sm text-gray-500 mb-6">Explique o fato novo que justifica o seu pedido de troca de
                        categoria.</p>
                    <div class="mb-8">
                        <textarea id="motivo_mudanca" name="motivo_mudanca" rows="4"
                            placeholder="Ex: Recebi uma proposta para estudar em uma universidade americana e preciso do visto F1..."
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all resize-none"></textarea>
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('step-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- 1.E steps would follow same pattern. Skipping detailed block for brevity in tool call, will rely on user to trust structure is same. -->
            <!-- 1.E.1 & 1.E.2 & 1.E.3 go here -->
            <div class="step" id="branch-1-e-1" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Data de entrada atual nos EUA:</h2>
                    <p class="text-sm text-gray-500 mb-6">Informe o dia em que você entrou no país nesta viagem atual.
                    </p>
                    <div class="mb-8">
                        <input type="date" id="data_entrada_atual" name="data_entrada_atual"
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all">
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('branch-1-e-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <div class="step" id="branch-1-e-2" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Motivo da extensão:</h2>
                    <p class="text-sm text-gray-500 mb-6">Selecione o principal motivo para precisar de mais tempo nos
                        EUA.</p>
                    <div class="flex flex-col gap-3 mb-8">
                        <label
                            class="flex items-center p-4 border-2 border-gray-200 rounded-xl cursor-pointer transition-colors hover:bg-gray-50 has-[:checked]:border-primary has-[:checked]:bg-gray-50/50">
                            <input type="checkbox" name="motivo_extensao" value="medico"
                                class="w-5 h-5 text-primary border-gray-300 rounded focus:ring-primary">
                            <span class="ml-3 font-medium text-gray-700">Tratamento médico</span>
                        </label>
                        <label
                            class="flex items-center p-4 border-2 border-gray-200 rounded-xl cursor-pointer transition-colors hover:bg-gray-50 has-[:checked]:border-primary has-[:checked]:bg-gray-50/50">
                            <input type="checkbox" name="motivo_extensao" value="evento"
                                class="w-5 h-5 text-primary border-gray-300 rounded focus:ring-primary">
                            <span class="ml-3 font-medium text-gray-700">Evento prolongado</span>
                        </label>
                        <label
                            class="flex items-center p-4 border-2 border-gray-200 rounded-xl cursor-pointer transition-colors hover:bg-gray-50 has-[:checked]:border-primary has-[:checked]:bg-gray-50/50">
                            <input type="checkbox" name="motivo_extensao" value="familia"
                                class="w-5 h-5 text-primary border-gray-300 rounded focus:ring-primary">
                            <span class="ml-3 font-medium text-gray-700">Necessidade familiar</span>
                        </label>
                        <label
                            class="flex items-center p-4 border-2 border-gray-200 rounded-xl cursor-pointer transition-colors hover:bg-gray-50 has-[:checked]:border-primary has-[:checked]:bg-gray-50/50">
                            <input type="checkbox" name="motivo_extensao" value="outro"
                                class="w-5 h-5 text-primary border-gray-300 rounded focus:ring-primary">
                            <span class="ml-3 font-medium text-gray-700">Outro</span>
                        </label>
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('branch-1-e-3')">Continuar</button>
                    </div>
                </div>
            </div>

            <div class="step" id="branch-1-e-3" data-step="1">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Tempo adicional solicitado (dias):</h2>
                    <p class="text-sm text-gray-500 mb-6">Informe quantos dias a mais você planeja ficar no país.</p>
                    <div class="mb-8">
                        <input type="number" id="tempo_adicional" name="tempo_adicional" min="1"
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all">
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('step-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- === STEP 2: FINANCEIRO === -->
            <!-- === STEP 2: FINANCEIRO === -->
            <div class="step" id="step-2" data-step="2">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Quem pagará a viagem?</h2>
                    <p class="text-sm text-gray-500 mb-6">A origem dos recursos é um ponto chave na análise consular.
                    </p>

                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="pagador" value="proprio" onclick="nextStep('branch-2-a-1')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Recursos próprios</span>
                            </div>
                        </label>

                        <label class="group relative cursor-pointer">
                            <input type="radio" name="pagador" value="patrocinador" onclick="nextStep('branch-2-b-1')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Patrocinador</span>
                            </div>
                        </label>

                        <label class="group relative cursor-pointer">
                            <input type="radio" name="pagador" value="empresa" onclick="nextStep('branch-2-c-1')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Empresa</span>
                            </div>
                        </label>

                        <label class="group relative cursor-pointer">
                            <input type="radio" name="pagador" value="outro" onclick="nextStep('step-3-1')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Outro</span>
                            </div>
                        </label>
                    </div>

                    <div class="mt-6">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>

            <!-- Branch 2.A.1: Renda -->
            <div class="step" id="branch-2-a-1" data-step="2">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Qual é a sua renda mensal atual?</h2>
                    <p class="text-sm text-gray-500 mb-6">Considere sua média de faturamento ou salário líquido mensal.
                    </p>
                    <div class="relative mb-6">
                        <div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none z-10">
                            <span class="text-gray-500 font-semibold text-lg">R$</span>
                        </div>
                        <input type="text" id="renda_mensal" name="renda_mensal" placeholder="0,00" inputmode="numeric"
                            oninput="formatCurrency(this)"
                            class="w-full pl-16 pr-4 py-4 border-2 border-gray-200 rounded-xl text-xl font-semibold focus:border-primary focus:ring-4 focus:ring-gray-50 outline-none transition-all placeholder:text-gray-300">
                    </div>
                    <div class="flex justify-between items-center pt-6 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white text-sm font-semibold py-2.5 px-6 rounded-lg shadow-sm hover:shadow transition-all"
                            onclick="nextStep('branch-2-a-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- Branch 2.A.2: Atividade Profissional -->
            <div class="step" id="branch-2-a-2" data-step="2">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Atividade profissional principal:</h2>
                    <p class="text-sm text-gray-500 mb-6">Selecione a opção que melhor descreve sua ocupação atual.</p>
                    <div class="flex flex-col gap-2 mb-6">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="fonte_renda" value="clt" onclick="checkIncomeSourceAndRedirect()"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Salário CLT</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="fonte_renda" value="autonomo"
                                onclick="checkIncomeSourceAndRedirect()" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Autônomo</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="fonte_renda" value="empresario"
                                onclick="checkIncomeSourceAndRedirect()" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Empresário</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="fonte_renda" value="investimentos"
                                onclick="checkIncomeSourceAndRedirect()" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Investimentos</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="fonte_renda" value="aposentado"
                                onclick="checkIncomeSourceAndRedirect()" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Aposentado</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="fonte_renda" value="estudante"
                                onclick="checkIncomeSourceAndRedirect()" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Estudante</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="fonte_renda" value="outros"
                                onclick="checkIncomeSourceAndRedirect()" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Outros</span>
                            </div>
                        </label>
                    </div>
                    <div class="flex justify-start items-center pt-6 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>

            <!-- Branch 2.A.3: Detalhes Empresário -->
            <div class="step" id="branch-2-a-3-empresario" data-step="2">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">Informações da empresa:</h2>
                    <div class="grid grid-cols-1 gap-4 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Número de funcionários</label>
                            <input type="number" name="qtd_funcionarios" min="0" placeholder="Ex: 5 funcionários"
                                class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Tempo de abertura (anos)</label>
                            <input type="number" name="tempo_empresa_abertura" min="0" step="0.5"
                                placeholder="Ex: 3 anos"
                                class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all">
                        </div>
                    </div>
                    <div class="flex justify-between items-center pt-6 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white text-sm font-semibold py-2.5 px-6 rounded-lg shadow-sm hover:shadow transition-all"
                            onclick="nextStep('step-3-1')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- Branch 2.A.3: Detalhes Autônomo -->
            <div class="step" id="branch-2-a-3-autonomo" data-step="2">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">Detalhes da atuação autônoma:</h2>
                    <div class="grid grid-cols-1 gap-4 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nicho / Área de atuação</label>
                            <input type="text" name="nicho_autonomo" placeholder="Ex: Consultoria de TI"
                                class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Possui contrato de prestação de
                                serviços?</label>
                            <div class="flex gap-4">
                                <label class="flex-1 group relative cursor-pointer">
                                    <input type="radio" name="possui_contrato" value="sim" class="peer sr-only">
                                    <div
                                        class="p-3 border border-gray-200 rounded-lg bg-white text-center transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                        <span class="font-medium text-sm">Sim</span>
                                    </div>
                                </label>
                                <label class="flex-1 group relative cursor-pointer">
                                    <input type="radio" name="possui_contrato" value="nao" class="peer sr-only">
                                    <div
                                        class="p-3 border border-gray-200 rounded-lg bg-white text-center transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                        <span class="font-medium text-sm">Não</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-between items-center pt-6 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white text-sm font-semibold py-2.5 px-6 rounded-lg shadow-sm hover:shadow transition-all"
                            onclick="nextStep('step-3-1')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- Branch 2.B.1: Relação -->
            <div class="step" id="branch-2-b-1" data-step="2">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Relação com o patrocinador:</h2>
                    <p class="text-sm text-gray-500 mb-6">Informe qual o seu grau de proximidade com a pessoa/empresa
                        que pagará a viagem.</p>
                    <div class="mb-8">
                        <select name="relacao_patrocinador"
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg bg-white focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all">
                            <option value="" disabled selected>Selecione...</option>
                            <option value="familiar">Familiar</option>
                            <option value="empresa">Empresa</option>
                            <option value="amigo">Amigo</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('branch-2-b-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <div class="step" id="branch-2-b-2" data-step="2">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Motivo do patrocínio:</h2>
                    <p class="text-sm text-gray-500 mb-6">Explique brevemente por que esta pessoa ou empresa está
                        custeando seus gastos.</p>
                    <div class="mb-8">
                        <textarea id="motivo_patrocinio" name="motivo_patrocinio" rows="4"
                            placeholder="Ex: Viagem de férias em família / Recompensa por metas atingidas..."
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all resize-none"></textarea>
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('step-3-1')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- Branch 2.C ... -->
            <div class="step" id="branch-2-c-1" data-step="2">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Tipo de viagem:</h2>
                    <p class="text-sm text-gray-500 mb-6">Selecione o objetivo principal desta viagem corporativa.</p>
                    <div class="mb-8">
                        <select name="tipo_viagem_empresa"
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg bg-white focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all">
                            <option value="" disabled selected>Selecione...</option>
                            <option value="treinamento">Treinamento</option>
                            <option value="congresso">Congresso</option>
                            <option value="negocios">Negócios</option>
                            <option value="representacao">Representação</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('branch-2-c-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <div class="step" id="branch-2-c-2" data-step="2">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Tempo de empresa:</h2>
                    <p class="text-sm text-gray-500 mb-6">Há quanto tempo você trabalha nesta organização?</p>
                    <div class="mb-8">
                        <input type="number" id="tempo_empresa" name="tempo_empresa" min="0" step="0.5"
                            placeholder="Ex: 2 anos"
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all">
                    </div>
                    <div class="flex justify-between items-center pt-8 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all"
                            onclick="nextStep('step-3-1')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- === STEP 3: DEMOGRÁFICO === -->



            <!-- 3.1: Idade -->
            <div class="step" id="step-3-1" data-step="3">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Qual sua idade?</h2>
                    <p class="text-sm text-gray-500 mb-6">Sua idade influencia nos critérios de isenção de entrevista.
                    </p>
                    <div class="mb-6">
                        <input type="number" id="idade" name="idade" min="0" max="120" placeholder="Ex: 32 anos"
                            class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all">
                    </div>
                    <div class="flex justify-between items-center pt-6 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white text-sm font-semibold py-2.5 px-6 rounded-lg shadow-sm hover:shadow transition-all"
                            onclick="nextStep('step-3-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- 3.2: Estado Civil -->
            <div class="step" id="step-3-2" data-step="3">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Estado Civil</h2>
                    <p class="text-sm text-gray-500 mb-6">Selecione sua situação civil legal atual.</p>
                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="estado_civil" value="solteiro" onclick="nextStep('step-3-3')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Solteiro(a)</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="estado_civil" value="casado"
                                onclick="nextStep('step-3-2-citizen')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Casado(a)</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="estado_civil" value="divorciado" onclick="nextStep('step-3-3')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Divorciado(a)</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="estado_civil" value="viuvo" onclick="nextStep('step-3-3')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Viúvo(a)</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="estado_civil" value="outro" onclick="nextStep('step-3-2-outro')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Outro</span>
                            </div>
                        </label>
                    </div>
                    <div class="mt-6">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>

            <!-- 3.2.1: Explicação Outro Estado Civil -->
            <div class="step" id="step-3-2-outro" data-step="3">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Explique seu estado civil:</h2>
                    <p class="text-sm text-gray-500 mb-6">Descreva brevemente (ex: União Estável, Separado...).</p>
                    <div class="mb-6">
                        <textarea name="estado_civil_outro_explicacao" rows="3" placeholder="Descreva aqui..."
                            class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all resize-none"></textarea>
                    </div>
                    <div class="flex justify-between items-center pt-6 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white text-sm font-semibold py-2.5 px-6 rounded-lg shadow-sm hover:shadow transition-all"
                            onclick="nextStep('step-3-2-citizen')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- 3.2.2: Cidadão Americano? -->
            <div class="step" id="step-3-2-citizen" data-step="3">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Parceiro é cidadão americano?</h2>
                    <p class="text-sm text-gray-500 mb-6">Esta informação ajuda a avaliar possíveis vínculos com o país.
                    </p>
                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="relacionamento_citizen" value="sim" onclick="nextStep('step-3-3')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Sim</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="relacionamento_citizen" value="nao" onclick="nextStep('step-3-3')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Não</span>
                            </div>
                        </label>
                    </div>
                    <div class="mt-6">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>

            <!-- 3.3: Filhos? -->
            <div class="step" id="step-3-3" data-step="3">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Você tem filhos?</h2>
                    <p class="text-sm text-gray-500 mb-6">Filhos no Brasil são considerados fortes vínculos sociais.</p>
                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="tem_filhos" value="sim" onclick="nextStep('step-3-4')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Sim</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="tem_filhos" value="nao" onclick="nextStep('step-4-1')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Não</span>
                            </div>
                        </label>
                    </div>
                    <div class="mt-6">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>

            <!-- 3.4: Quantos filhos? -->
            <div class="step" id="step-3-4" data-step="3">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Quantos filhos você tem?</h2>
                    <p class="text-sm text-gray-500 mb-6">Informe o número total de filhos (menores ou maiores de
                        idade).</p>
                    <div class="mb-6">
                        <input type="number" id="filhos_qtd" name="filhos_qtd" min="1"
                            class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all">
                    </div>
                    <div class="flex justify-between items-center pt-6 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white text-sm font-semibold py-2.5 px-6 rounded-lg shadow-sm hover:shadow transition-all"
                            onclick="nextStep('step-4-1')">Continuar</button>
                    </div>
                </div>
            </div>


            <!-- === STEP 4: VÍNCULOS === -->

            <!-- 4.1: Estudando? -->
            <div class="step" id="step-4-1" data-step="4">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Está estudando atualmente?</h2>
                    <p class="text-sm text-gray-500 mb-6">Estudos em curso são excelentes demonstrativos de intenção de
                        retorno.</p>
                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="estudando" value="sim" onclick="nextStep('step-4-1-a')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Sim</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="estudando" value="nao" onclick="nextStep('step-4-1-e')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Não</span>
                            </div>
                        </label>
                    </div>
                    <div class="mt-6">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>

            <!-- 4.1.a: Detalhes do Curso Atual -->
            <div class="step" id="step-4-1-a" data-step="4">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">Sobre o seu curso atual:</h2>
                    <div class="grid grid-cols-1 gap-4 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Tipo de curso</label>
                            <select name="estudo_tipo"
                                class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all bg-white">
                                <option value="" disabled selected>Selecione...</option>
                                <option value="fundamental">Ensino Fundamental</option>
                                <option value="medio">Ensino Médio</option>
                                <option value="tecnico">Técnico</option>
                                <option value="superior">Superior (Graduação)</option>
                                <option value="pos">Pós-graduação / Mestrado / Doutorado</option>
                                <option value="outro">Outro (Cursos livres, idiomas, etc)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">O que você estuda?</label>
                            <input type="text" name="estudo_nome" placeholder="Ex: Engenharia Civil, Inglês, 3º ano..."
                                class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all">
                        </div>
                    </div>
                    <div class="flex justify-between items-center pt-6 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white text-sm font-semibold py-2.5 px-6 rounded-lg shadow-sm hover:shadow transition-all"
                            onclick="nextStep('step-4-1-b')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- 4.1.b: Término do Curso Atual -->
            <div class="step" id="step-4-1-b" data-step="4">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Quando termina o curso?</h2>
                    <p class="text-sm text-gray-500 mb-6">Informe a data prevista para a conclusão dos estudos.</p>
                    <div class="mb-6">
                        <input type="month" name="estudo_termino"
                            class="w-full p-4 border-2 border-gray-200 rounded-xl text-lg focus:border-primary focus:ring-4 focus:ring-gray-100/50 outline-none transition-all">
                    </div>
                    <div class="flex justify-between items-center pt-6 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white text-sm font-semibold py-2.5 px-6 rounded-lg shadow-sm hover:shadow transition-all"
                            onclick="nextStep('step-4-1-c')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- 4.1.c: Outra Formação? (Para quem estuda) -->
            <div class="step" id="step-4-1-c" data-step="4">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Além deste curso, possui outra formação
                        concluída?</h2>
                    <p class="text-sm text-gray-500 mb-6">Informe se você já possui algum diploma acadêmico ou técnico
                        anterior.</p>
                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="possui_outra_formacao" value="sim"
                                onclick="nextStep('step-4-1-f')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Sim</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="possui_outra_formacao" value="nao" onclick="nextStep('step-4-2')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Não</span>
                            </div>
                        </label>
                    </div>
                    <div class="mt-6">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>

            <!-- 4.1.e: Possui Formação? (Para quem não estuda) -->
            <div class="step" id="step-4-1-e" data-step="4">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Possui alguma formação acadêmica ou técnica
                        concluída?</h2>
                    <p class="text-sm text-gray-500 mb-6">Cursos superiores, técnicos ou pós-graduações concluídas.</p>
                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="possui_formacao_concluida" value="sim"
                                onclick="nextStep('step-4-1-f')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Sim</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="possui_formacao_concluida" value="nao"
                                onclick="nextStep('step-4-2')" class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Não</span>
                            </div>
                        </label>
                    </div>
                    <div class="mt-6">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>

            <!-- 4.1.f: Detalhes da Formação Concluída (Compartilhado) -->
            <div class="step" id="step-4-1-f" data-step="4">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">Detalhes da formação concluída:</h2>
                    <div class="grid grid-cols-1 gap-4 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nível de formação</label>
                            <select name="formacao_nivel"
                                class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all bg-white">
                                <option value="" disabled selected>Selecione...</option>
                                <option value="tecnico">Ensino Técnico</option>
                                <option value="superior">Graduação (Superior)</option>
                                <option value="pos">Pós-graduação / Especialização</option>
                                <option value="mestrado">Mestrado</option>
                                <option value="doutorado">Doutorado</option>
                                <option value="outro">Outro</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nome do curso / Área</label>
                            <input type="text" name="formacao_nome" placeholder="Ex: Administração de Empresas"
                                class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ano de conclusão
                                (aproximado)</label>
                            <input type="number" name="formacao_ano" placeholder="Ex: 2018" min="1950" max="2026"
                                class="w-full p-3 border border-gray-300 rounded-lg text-base focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all">
                        </div>
                    </div>
                    <div class="flex justify-between items-center pt-6 border-t border-gray-100">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                        <button type="button"
                            class="bg-primary hover:bg-primary-hover text-white text-sm font-semibold py-2.5 px-6 rounded-lg shadow-sm hover:shadow transition-all"
                            onclick="nextStep('step-4-2')">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- 4.2: Imóvel? -->
            <div class="step" id="step-4-2" data-step="4">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Possui imóvel próprio em seu nome?</h2>
                    <p class="text-sm text-gray-500 mb-6">Bens declarados no Brasil reforçam seu vínculo patrimonial.
                    </p>
                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="imovel" value="sim" onclick="nextStep('step-4-3')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Sim</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="imovel" value="nao" onclick="nextStep('step-4-3')"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Não</span>
                            </div>
                        </label>
                    </div>
                    <div class="mt-6">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>

            <!-- 4.3: Empresa? -->
            <div class="step" id="step-4-3" data-step="4">
                <div class="flex flex-col h-full justify-center">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Possui empresa ou negócio próprio?</h2>
                    <p class="text-sm text-gray-500 mb-6">Ter um negócio ativo no Brasil é um dos vínculos mais fortes
                        para o visto.</p>
                    <div class="flex flex-col gap-2">
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="empresa_propria" value="sim" onclick="handleFinalSelection()"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Sim</span>
                            </div>
                        </label>
                        <label class="group relative cursor-pointer">
                            <input type="radio" name="empresa_propria" value="nao" onclick="handleFinalSelection()"
                                class="peer sr-only">
                            <div
                                class="p-4 border border-gray-200 rounded-lg bg-white transition-all hover:border-gray-400 peer-checked:border-primary peer-checked:bg-gray-50/50 peer-checked:text-primary">
                                <span class="font-medium text-sm">Não</span>
                            </div>
                        </label>
                    </div>
                    <div class="mt-6">
                        <button type="button"
                            class="text-gray-500 hover:text-gray-800 text-sm font-medium px-4 py-2 transition-colors"
                            onclick="prevStep()">Voltar</button>
                    </div>
                </div>
            </div>


            <!-- FINAL SUCCESS SCREEN -->
            <div class="step" id="step-final" data-step="final">
                <div class="flex flex-col h-full items-center justify-center text-center max-w-lg mx-auto pt-20">
                    <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6 animate-bounce">
                        <span class="text-4xl">✅</span>
                    </div>
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">Tudo certo!</h2>
                    <p class="text-base text-gray-600 mb-8 leading-relaxed">
                        Recebemos suas informações!<br>
                        <strong>Chame no WhatsApp</strong> para receber sua análise.
                    </p>

                    <a href="https://wa.me/5511988945503" target="_blank"
                        class="w-full sm:w-auto bg-[#25D366] hover:bg-[#128C7E] text-white font-bold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all flex items-center justify-center gap-3 mb-4 group no-underline">
                        <svg class="w-6 h-6 fill-current" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z" />
                        </svg>
                        Falar com Especialista
                    </a>

                    <button type="button"
                        class="text-gray-400 hover:text-gray-600 font-medium text-sm transition-colors mt-6 underline decoration-transparent hover:decoration-gray-400"
                        onclick="location.reload()">Preencher Novamente</button>
                </div>
            </div>

        </form>
    </main>

    <!-- Resume Modal -->
    <div id="resumeModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-xl max-w-sm w-full p-6 transform transition-all scale-100">
            <h3 class="text-xl font-bold text-gray-900 mb-2">Continuar preenchimento?</h3>
            <p class="text-gray-600 mb-6">Encontramos um preenchimento em andamento. Deseja continuar de onde parou?</p>
            <div class="flex flex-col gap-3">
                <button onclick="resumeForm()"
                    class="w-full bg-primary hover:bg-primary-hover text-white font-bold py-3 px-6 rounded-lg transition-colors">
                    Continuar de onde parou
                </button>
                <button onclick="restartForm()"
                    class="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 px-6 rounded-lg transition-colors">
                    Começar do início
                </button>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>

</html>